FROM nvcr.io/nvidia/rapidsai/rapidsai-core:23.02-cuda11.8-runtime-ubuntu22.04-py3.10

ENV DEBIAN_FRONTEND noninteractive

RUN pip install h5py psutil pyyaml matplotlib
RUN pip install docker ansicolors

RUN python3 -c 'from pylibraft.neighbors import ivf_pq;'

COPY --from=ann-benchmarks /home/app /home/app
WORKDIR /home/app

ENTRYPOINT ["python3", "-u", "run_algorithm.py"]
